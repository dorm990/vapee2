// Упрощенная библиотека QRCode для Telegram Mini App
var QRCode = (function() {
    function toCanvas(canvas, text, options) {
        options = options || {};
        var size = options.width || 256;
        var margin = options.margin !== undefined ? options.margin : 4;
        
        // Используем внешний API для генерации QR-кода
        var qrUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=' + size + 'x' + size + '&data=' + encodeURIComponent(text);
        
        var img = new Image();
        img.onload = function() {
            canvas.width = size;
            canvas.height = size;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, size, size);
        };
        img.src = qrUrl;
    }
    
    function toDataURL(text, options) {
        return new Promise(function(resolve) {
            options = options || {};
            var size = options.width || 256;
            var qrUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=' + size + 'x' + size + '&data=' + encodeURIComponent(text);
            resolve(qrUrl);
        });
    }
    
    return {
        toCanvas: toCanvas,
        toDataURL: toDataURL
    };
})();
